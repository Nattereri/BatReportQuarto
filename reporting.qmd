---
title: "One Click Reporting"
bibliography: references.bib
format: 
  html:
     code-fold: true
     code-summary: "Show the code"
---

```{r}
#| include: false

library(knitr)
library(tidyverse)
library(iBats)
library(gt)
library(broman)
library(glue)

```

A full bat survey report produced, ***with one mouse click***, from sound analysis data (i.e after identifying the bat detector calls to species or genus with sound analysis). _One click reporting_ is achieved through literate programming [@knuth84]; a procedure of mixing code and descriptive writing, in order to undertake and explain data analysis simultaneously in the same document.  

The first few rows of some bat survey data, post sound analysis, is shown in @tbl-surveydata; this is from of the `statics` data in the `iBats` package, it is _tidy_ data and has the minimum columns for undertaking effective analysis:

-   Description
-   DateTime
-   Species
-   Latitude
-   Longitude

The `r nrBats <- add_commas(nrow(statics)); nrBats` rows in the `statics` data is used here to demonstrate literate programming with Quarto®[^1].

[^1]: Quarto® the next generation of R Markdown.

```{r}
#| label: tbl-surveydata
#| tbl-cap: !expr glue::glue("Bat Survey Data- First Ten Rows of the {nrBats} in the 'statics' Data")

surveydata <- statics %>% # statics is a tidy data set from the iBats package
  #select(DateTime, Species, Latitude, Longitude, Description) %>% 
  rename(`Date and Time` = DateTime,  `Bat Species` = Species) %>% 
  sample_n(10) %>% 
  arrange(`Date and Time`)


# Table made with gt()
gt(head(surveydata, n = 10L)) %>% 
  tab_style(
    style = list(
      cell_fill(color = "black"),
      cell_text(color = "white"),
      cell_text(weight = "bold")
      ),
    locations = cells_column_labels(
      columns = everything()
    )
  )
```


## Why Do This?

The advantages of this approach to bat data science are appreciable:

1. Workflow
    i) Reduces (and can eliminate) any copy and paste activity)
    ii) Reports are easily created with new data or updated with revised data 
2. Reproducible

What's the disadvantage?
