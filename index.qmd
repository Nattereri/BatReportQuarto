---
title: "Getting Started"
format: 
  html:
     code-fold: true
     code-summary: "Show the code"
number-sections: true
---

These web pages complement the *data science* chapters of the forthcoming 4^th^ Edition of BCT's Bat Survey Guidelines, and hopefully encourage ecologists to make the most of their bat survey data. They also demonstrate literate programming with Quarto®[^1] and R Markdown[^13] which can vastly improve workflow[^23] (*welcome to the world beyond Excel*).

The term _data science_ is used, as this covers data collection, management, processing, analysis, visualisation, interpretation, reporting and reproducibility. Statisticians would state this is what they have always done in statistics! There is no doubt the phenomenon of _data science_ is growing, most major universities now offer a degree course in the subject and together with the increasing power of computer algorithms; _data science_ is more than just a rebranding of statistics [@Daviddonoho201750:9bd5].

The _data science_ is applied through literate programming outlined in @fig-workflowred [@knuth_literate_1984]. This enables efficient reporting of bat data[^8] from a simple table, such as a count of bats, to the output and interpretation of machine learning in a fully formatted report; plus everything in-between, all accomplished through open source R[^9] [@R-base] and RStudio [@RStudio22]. The beauty of literate programming is reproducibility; an essential tenet of all scientific study, in the commercial and legal world it makes for defensible reporting.

![Literate Programming](Images/workflowRed.png){#fig-workflowred}

Much is said about the digital skills gap [^20]; in a small way, these data science pages aim to improve digital skills by demonstrating modern data science methods[^21]. For a balanced understanding of the link between digital skills and data science see the [Royal Statistical Society article](https://realworlddatascience.net/news-and-views/editors-blog/posts/2023/02/14/digital-skills.html)

You may ask what's wrong with the spreadsheet for data science? On a practical level spreadsheets are hard to maintain, find errors in or see there was an error in the first place, they are poor at handling dates[^22] and difficult to share with others.  For spreadsheet blunders listen to Tim Harford's [More or less](https://www.bbc.co.uk/sounds/play/w3ct3k5z) on BBC sounds[^24]; for a litany of mathematical mistakes, many involving spreadsheets, see Matt Parker's book _Humble Pi A comedy of Maths Errors_ [@Mattparker2019Humble:61dc]. On a positive note spreadsheets are handy and easy to use for a few lines of data.

To help ecologists on their data science journey, all the code making the graphs and analysis in these web pages is free to copy and use;  just click on  _Show the code_, copy to the clipboard [^2], paste into the R environment and run. If new to R and RStudio see @sec-installr. 

A _Show the code_ is given below, the code produces @fig-example.  The code copied to the clipboard is designed to run as a standalone _chunk_ (or _R script_)[^11]; the code loads the required R libraries and data.



```{r}
#| code-fold: show
#| label: fig-example
#| fig-cap: "Example Graph: Monthly Bat Activity from the statics data set in the iBats Package"
#| warning: false
#| fig.height: 7

### Libraries Used
library(tidyverse) # Data Science packages - see https://www.tidyverse.org/
library(treemapify) # extension to ggplot for plotting treemaps -
# see https://cran.r-project.org/web/packages/treemapify/vignettes/introduction-to-treemapify.html
library(ggthemes) # for colour pallet "Tableau 10"

# Install devtools if not installed
# devtools is used to install the iBats package from GitHub
if (!require(devtools)) {
  install.packages("devtools")
}

# If iBats not installed load from Github
if (!require(iBats)) {
  devtools::install_github("Nattereri/iBats")
}
library(iBats)
###

# Add data and time information to the iBats statics bat survey data set using the iBats::date_time_info
statics_plus <- iBats::date_time_info(statics)

graph_data <- statics_plus %>%
  group_by(Species, Month) %>%
  tally()

ggplot(graph_data, aes(area = n, fill = Month, label = Species, subgroup = Month)) +
  scale_fill_tableau(palette = "Tableau 10") + #
  geom_treemap(colour = "white", size = 2, alpha = 0.9) +
  geom_treemap_subgroup_border(colour = "black", size = 5, alpha = 0.9) +
  geom_treemap_subgroup_text(place = "centre", grow = T, alpha = 0.9, colour = "grey20", min.size = 0) +
  geom_treemap_text(colour = "grey90", place = "topleft", fontface = "italic", reflow = T, min.size = 0, alpha = 0.9) +
  theme_bw() +
  theme(legend.position = "none") # No legend
```

Literate programming facilitates the use of coding languages other than R such as Python[^6], and Julia[^7]. Computer languages can be mixed in the same literate programming document; for example with a chuck of R code doing the data manipulation and another chunk of Python code performing the machine learning.  Coding languages applied to data science are developing rapidly in terms of their ability, speed of execution, and user friendliness[^5]; literate programming provides the framework for ecologists to keep their data science skills moving forward.



[^1]: Quarto® is an open-source scientific and technical publishing system: see <https://quarto.org/>.
[^13]: R Markdown see <https://rmarkdown.rstudio.com/>.
[^2]: Clip board icon is in the top right hand corner of the code window.

[^5]:  Julia has a language syntax similar to Python, runs fast, has a statistical library like R and linear programming skills similar to MATLAB.
[^6]: <https://www.python.org/>
[^7]: <https://julialang.org/>
[^8]:  as exported from sound analysis software
[^9]:  Windows <https://cran.r-project.org/bin/windows/base/> Mac Intel & ARM <https://cran.r-project.org/bin/macosx/>

[^11]: Many R script's are required in applying literate programming to bat data science; these are best organised through Quarto or R Markdown documents where the R scripts form code chunks.

[^20]: The UK government has quantified the the UK Data Skills Gap see <https://www.gov.uk/government/publications/quantifying-the-uk-data-skills-gap/quantifying-the-uk-data-skills-gap-full-report>.
[^21]: The data skills gap is relevant to professional bodies, such as the Chartered Institute of Ecology and Environmental Management (CIEEM) a leading institute for professional ecologists; their competency framework, which members are required to fulfill, makes no mention of statistics or data science.
[^22]: Excel will convert a data entry into a date even if it is not, e.g. an entry of "1/1" or "1-1" would return "01-Jan"!
[^23]: For example literate programming eliminates the countless copy and paste of a traditional reporting workflow.
[^24]: _More or Less_ (Spreadsheet disasters) was released by the World Service on 11 Feb 2023 and is available for over a year.

## Evidence Led Reporting

Literate programming assists data science and reproducibility, promoting evidence led reporting and decision making.  Reports are often produced for regulatory bodies, central government or local authorities, these organisations have mandatory strategies for the use of science, evidence and evaluation in there advice and actions, and the legality of their decisions[@AUTOKEY].

## Install R, RStudio and Packages {#sec-installr}

1.  Download and install the latest version of R <https://cran.r-project.org/bin/windows/base/>. Download the version for your operating system; R can be downloaded for Windows, Mac & Linux.\
2.  It is recommended R is used through the *RStudio* IDE. Download and install the latest version of RStudio from their web page <https://www.rstudio.com/products/rstudio/#Desktop>. Download the *free* desktop version.

### Install the *iBats* Package from GitHub

The `iBats` package contains example data and functions that help with the *Data Science* of bat survey results. To install this package use the code below in the RStudio _Console_; one line at a time. The package is installed from GitHub.


```{r}
#| code-fold: show
#| eval: false

install.packages("devtools")

devtools::install_github("Nattereri/iBats")


```

## Acknowledgement {.unnumbered}


Free and Open Source Software (FOSS) constitutes 70-90% of any modern software solution[^31]. R and RStudio are 
open source software that have made data science more open, intuitive, accessible, and collaborative. As a Public Good[^10] the value of FOSS is yet to be fully recognised. FOSS is provided by a large community, without whom these web pages would not be written; some of this community are acknowledged as individuals in the references section of the [Resources](https://bat-survey-reporting.netlify.app/resources.html) page.

[^10]: A commodity or service that is provided without profit to all members of a society, either by the government or by a private individual or organization.

[^31]: <https://www.linuxfoundation.org/blog/blog/a-summary-of-census-ii-open-source-software-application-libraries-the-world-depends-on>
